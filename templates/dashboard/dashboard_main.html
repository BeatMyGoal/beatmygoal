{% extends "base.html" %}

{% load staticfiles %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<script src="{% static 'js/dashboard/dashboard.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
<div class="row dashboard">
  <div class="hide-for-small-only">
    <div class="large-2 medium-2 columns">
      <ul class="side-nav filter-bar">
        <center>
        <li><h4>Filters</h4></li>
        <li id = "all" class="filter-choice side current"><a href="#">All Goals</a></li>
        <li id = "mine" class="filter-choice side"><a href="#">My Goals</a></li>
        <li id = "priv" class="filter-choice side"><a href="#">Private Goals</a></li>
        <li id = "pend" class="filter-choice side"><a href="#">Pending Invites</a></li>
      </center>
      </ul>
    </div>
  </div> 
  <div class="large-8 medium-8 columns">
    <div class="card-holder-background">
       <div class="show-for-small-only">
        <div class="row collapse">
          <ul class="breadcrumbs filter-bar">
            <li><h4>Filter Goals</h4></li>
            <li id = "all" class="filter-choice current"><a href="#">All</a></li>
            <li id = "mine" class="filter-choice"><a href="#">Mine</a></li>
            <li id = "priv" class="filter-choice"><a href="#">Private</a></li>
            <li id = "pend" class="filter-choice"><a href="#">Pending</a></li>
          </ul>
        </div>
      </div>
      <div class="row collapse">
          <div class="large-1 small-1 columns">
              &nbsp;
          </div>
          <div class="large-8 small-7 columns">
              <input id="dashboard_search" type="text" />
          </div>
          <div class="large-2 small-3 columns">
              <a class="button expand postfix">Search</a>
          </div>
          <div class="large-1 small-1 columns">
              &nbsp;
          </div>
      </div>
      <div class="row">
          <ul class="dashcard-container small-block-grid-1 medium-block-grid-1 large-block-grid-2"> </ul>
      </div>
      <div class="users" style="display:none">
         {% for user in users %} 
              <div id="id{{ user.id }}">{{ user.username }}</div>
         {% endfor %} 
      </div>
    </div>
  </div> 
  <div class="large-2 medium-2 columns">
    
  </div> 
</div>


<!--Tutorial-->

<script>

function getQueryVariable(variable) {
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
    if (pair[0] == variable) {
      return pair[1];
    }
  } 
}
</script>

<ol id = "joyride_tour" class="joyride-list" data-joyride>
  <li data-button="Next" >
    <h3>Browse Goal</h3><hr />
    <p>All public goals are displayed here. You can either join or view the goal on this page.</p>
  </li>
  <li data-id="createGoal" data-text="Create my own goal" data-options="tip_location: top;">
    <h3>Create Goal</h3><hr />
    <p>You can also create your own goal!</p>
  </li>
  <li data-button="End">
    <h4>The End</h4><hr />
  </li>
</ol>

<script>

if (getQueryVariable("tutorial")){
$(function(){  
    $(document).foundation({joyride: {post_step_callback: function(index){
        if (index == 1){
            window.location= "/goals/create?tutorial=true"};} 
    }});
});

$(document).ready(function(){
   $(document).foundation('joyride', 'start');
});
}
</script>

{% endblock %}
