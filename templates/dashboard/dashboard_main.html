{% extends "base.html" %}

{% load staticfiles %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<script src="{% static 'js/dashboard/dashboard.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />

<div class="card-holder-background">
    <div class="row collapse">
        <div class="large-1 small-1 columns">
            &nbsp;
        </div>
        <div class="large-8 small-7 columns">
            <input id="dashboard_search" type="text" />
        </div>
        <div class="large-2 small-3 columns">
            <a class="button expand postfix">Search</a>
        </div>
        <div class="large-1 small-1 columns">
            &nbsp;
        </div>
    </div>
    <div class="row">
        <ul class="dashcard-container small-block-grid-1 medium-block-grid-1 large-block-grid-2"> </ul>
    </div>
    <div class="users" style="display:none">
       {% for user in users %} 
            <div id="id{{ user.id }}">{{ user.username }}</div>
       {% endfor %} 
    </div>
</div>

<!--Tutorial-->

<script>

function getQueryVariable(variable) {
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
    if (pair[0] == variable) {
      return pair[1];
    }
  } 
}
</script>

<ol id = "joyride_tour" class="joyride-list" data-joyride>
  <li data-button="Next" >
    <h3>Browse Goal</h3><hr />
    <p>All public goals are displayed here. You can either join or view the goal on this page.</p>
  </li>
  <li data-id="createGoal" data-text="Create my own goal" data-options="tip_location: top;">
    <h3>Create Goal</h3><hr />
    <p>You can also create your own goal!</p>
  </li>
  <li data-button="End">
    <h4>The End</h4><hr />
  </li>
</ol>

<script>

if (getQueryVariable("tutorial")){
$(function(){  
    $(document).foundation({joyride: {post_step_callback: function(index){
        if (index == 1){
            window.location= "/goals/create?tutorial=true"};} 
    }});
});

$(document).ready(function(){
   $(document).foundation('joyride', 'start');
});
}
</script>

{% endblock %}
